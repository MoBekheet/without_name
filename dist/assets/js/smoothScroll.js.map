{"version":3,"sources":["../../../src/assets/js/smoothScroll.js"],"names":["winsize","MathUtils","map","x","a","b","c","d","lerp","n","body","document","calcWinsize","width","window","innerWidth","height","innerHeight","addEventListener","docScroll","getPageYScroll","pageYOffset","documentElement","scrollTop","Item","el","DOM","image","querySelector","renderedStyles","innerTranslationY","previous","current","ease","maxValue","parseInt","setValue","Math","max","min","minValue","props","top","update","observer","IntersectionObserver","entries","forEach","entry","isVisible","intersectionRatio","observe","initEvents","key","getSize","layout","rect","getBoundingClientRect","resize","render","style","transform","SmoothScroll","main","scrollable","items","querySelectorAll","item","push","translationY","setSize","requestAnimationFrame","scrollHeight","position","left","overflow","preloadImages","Promise","resolve","imagesLoaded","background","then","classList","remove"],"mappings":"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","sourcesContent":["{\n  const MathUtils = {\n    map: (x, a, b, c, d) => (x - a) * (d - c) / (b - a) + c,\n    lerp: (a, b, n) => (1 - n) * a + n * b\n  };\n\n  const body = document.body;\n\n  let winsize;\n  const calcWinsize = () => winsize = { width: window.innerWidth, height: window.innerHeight };\n  calcWinsize();\n  window.addEventListener('resize', calcWinsize);\n\n  let docScroll;\n  const getPageYScroll = () => docScroll = window.pageYOffset || document.documentElement.scrollTop;\n  window.addEventListener('scroll', getPageYScroll);\n\n  class Item {\n    constructor(el) {\n      this.DOM = { el: el };\n      this.DOM.image = this.DOM.el.querySelector('.item__img');\n      \n      this.renderedStyles = {\n        innerTranslationY: {\n          previous: 0,\n          current: 0,\n          ease: 0.1,\n          // maxValue: parseInt(getComputedStyle(this.DOM.image).getPropertyValue('--overflow'), 10),\n          maxValue: parseInt(40, 10),\n          setValue: () => {\n            const maxValue = this.renderedStyles.innerTranslationY.maxValue;\n            const minValue = -1 * maxValue;\n            return Math.max(Math.min(MathUtils.map(this.props.top - docScroll, winsize.height, -1 * this.props.height, minValue, maxValue), maxValue), minValue)\n          }\n        }\n      };\n      this.update();\n      this.observer = new IntersectionObserver((entries) => {\n        entries.forEach(entry => this.isVisible = entry.intersectionRatio > 0);\n      });\n      this.observer.observe(this.DOM.el);\n      this.initEvents();\n    }\n    update() {\n      this.getSize();\n      for (const key in this.renderedStyles) {\n        this.renderedStyles[key].current = this.renderedStyles[key].previous = this.renderedStyles[key].setValue();\n      }\n      this.layout();\n    }\n    getSize() {\n      const rect = this.DOM.el.getBoundingClientRect();\n      this.props = {\n        height: rect.height,\n        top: docScroll + rect.top\n      }\n    }\n    initEvents() {\n      window.addEventListener('resize', () => this.resize());\n    }\n    resize() {\n      this.update();\n    }\n    render() {\n      for (const key in this.renderedStyles) {\n        this.renderedStyles[key].current = this.renderedStyles[key].setValue();\n        this.renderedStyles[key].previous = MathUtils.lerp(this.renderedStyles[key].previous, this.renderedStyles[key].current, this.renderedStyles[key].ease);\n      }\n      this.layout();\n    }\n    layout() {\n      this.DOM.image.style.transform = `translate3d(0,${this.renderedStyles.innerTranslationY.previous}px,0)`;\n    }\n  }\n\n  class SmoothScroll {\n    constructor() {\n      this.DOM = { main: document.querySelector('main') };\n      this.DOM.scrollable = this.DOM.main.querySelector('div[data-scroll]');\n      this.items = [];\n      [...this.DOM.main.querySelectorAll('.item_scroll')].forEach(item => this.items.push(new Item(item)));\n      this.renderedStyles = {\n        translationY: {\n          previous: 0,\n          current: 0,\n          ease: 0.1,\n          setValue: () => docScroll\n        }\n      };\n      this.setSize();\n      this.update();\n      // this.style();\n      this.initEvents();\n      requestAnimationFrame(() => this.render());\n    }\n    update() {\n      for (const key in this.renderedStyles) {\n        this.renderedStyles[key].current = this.renderedStyles[key].previous = this.renderedStyles[key].setValue();\n      }\n      this.layout();\n    }\n    layout() {\n      this.DOM.scrollable.style.transform = `translate3d(0,${-1 * this.renderedStyles.translationY.previous}px,0)`;\n    }\n    setSize() {\n      body.style.height = `${this.DOM.scrollable.scrollHeight}px`;\n    }\n    style() {\n      this.DOM.main.style.position = 'fixed';\n      this.DOM.main.style.width = this.DOM.main.style.height = '100%';\n      this.DOM.main.style.top = this.DOM.main.style.left = 0;\n      this.DOM.main.style.overflow = 'hidden';\n    }\n    initEvents() {\n      window.addEventListener('resize', () => this.setSize());\n    }\n    render() {\n      for (const key in this.renderedStyles) {\n        this.renderedStyles[key].current = this.renderedStyles[key].setValue();\n        this.renderedStyles[key].previous = MathUtils.lerp(this.renderedStyles[key].previous, this.renderedStyles[key].current, this.renderedStyles[key].ease);\n      }\n      this.layout();\n      for (const item of this.items) {\n        if (item.isVisible) {\n          item.render();\n        }\n      }\n      requestAnimationFrame(() => this.render());\n    }\n  }\n  const preloadImages = () => {\n    return new Promise((resolve, reject) => {\n      imagesLoaded(document.querySelectorAll('.item__img'), { background: true }, resolve);\n    });\n  };\n  preloadImages().then(() => {\n    document.body.classList.remove('loading');\n    getPageYScroll();\n    new SmoothScroll();\n  });\n}"],"file":"smoothScroll.js"}