"use strict";var _this=void 0;function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}}function _newArrowCheck(a,b){if(a!==b)throw new TypeError("Cannot instantiate an arrow function")}{var winsize,MathUtils={map:function map(e,f,a,b,c){return _newArrowCheck(this,_this),(e-f)*(c-b)/(a-f)+b}.bind(void 0),lerp:function lerp(c,a,b){return _newArrowCheck(this,_this),(1-b)*c+b*a}.bind(void 0)},body=document.body,calcWinsize=function(){return _newArrowCheck(this,_this),winsize={width:window.innerWidth,height:window.innerHeight}}.bind(void 0);calcWinsize(),window.addEventListener("resize",calcWinsize);var docScroll,getPageYScroll=function(){return _newArrowCheck(this,_this),docScroll=window.pageYOffset||document.documentElement.scrollTop}.bind(void 0);window.addEventListener("scroll",getPageYScroll);var Item=function(){function a(a){var b=this;this.DOM={el:a},this.DOM.image=this.DOM.el.querySelector(".item__img"),this.renderedStyles={innerTranslationY:{previous:0,current:0,ease:.1,maxValue:parseInt(40,10),setValue:function setValue(){var a=Math.max,c=Math.min;_newArrowCheck(this,b);var d=this.renderedStyles.innerTranslationY.maxValue,e=-1*d;return a(c(MathUtils.map(this.props.top-docScroll,winsize.height,-1*this.props.height,e,d),d),e)}.bind(this)}},this.update(),this.observer=new IntersectionObserver(function(a){var c=this;_newArrowCheck(this,b),a.forEach(function(a){return _newArrowCheck(this,c),this.isVisible=0<a.intersectionRatio}.bind(this))}.bind(this)),this.observer.observe(this.DOM.el),this.initEvents()}var b=a.prototype;return b.update=function update(){for(var a in this.getSize(),this.renderedStyles)this.renderedStyles[a].current=this.renderedStyles[a].previous=this.renderedStyles[a].setValue();this.layout()},b.getSize=function getSize(){var a=this.DOM.el.getBoundingClientRect();this.props={height:a.height,top:docScroll+a.top}},b.initEvents=function initEvents(){var a=this;window.addEventListener("resize",function(){return _newArrowCheck(this,a),this.resize()}.bind(this))},b.resize=function resize(){this.update()},b.render=function render(){for(var a in this.renderedStyles)this.renderedStyles[a].current=this.renderedStyles[a].setValue(),this.renderedStyles[a].previous=MathUtils.lerp(this.renderedStyles[a].previous,this.renderedStyles[a].current,this.renderedStyles[a].ease);this.layout()},b.layout=function layout(){this.DOM.image.style.transform="translate3d(0,".concat(this.renderedStyles.innerTranslationY.previous,"px,0)")},a}(),SmoothScroll=function(){function a(){var a=this;this.DOM={main:document.querySelector("main")},this.DOM.scrollable=this.DOM.main.querySelector("div[data-scroll]"),this.items=[],_toConsumableArray(this.DOM.main.querySelectorAll(".item_scroll")).forEach(function(b){return _newArrowCheck(this,a),this.items.push(new Item(b))}.bind(this)),this.renderedStyles={translationY:{previous:0,current:0,ease:.1,setValue:function setValue(){return _newArrowCheck(this,a),docScroll}.bind(this)}},this.setSize(),this.update(),this.initEvents(),requestAnimationFrame(function(){return _newArrowCheck(this,a),this.render()}.bind(this))}var b=a.prototype;return b.update=function update(){for(var a in this.renderedStyles)this.renderedStyles[a].current=this.renderedStyles[a].previous=this.renderedStyles[a].setValue();this.layout()},b.layout=function layout(){this.DOM.scrollable.style.transform="translate3d(0,".concat(-1*this.renderedStyles.translationY.previous,"px,0)")},b.setSize=function setSize(){body.style.height="".concat(this.DOM.scrollable.scrollHeight,"px")},b.style=function style(){this.DOM.main.style.position="fixed",this.DOM.main.style.width=this.DOM.main.style.height="100%",this.DOM.main.style.top=this.DOM.main.style.left=0,this.DOM.main.style.overflow="hidden"},b.initEvents=function initEvents(){var a=this;window.addEventListener("resize",function(){return _newArrowCheck(this,a),this.setSize()}.bind(this))},b.render=function render(){var a=this;for(var h in this.renderedStyles)this.renderedStyles[h].current=this.renderedStyles[h].setValue(),this.renderedStyles[h].previous=MathUtils.lerp(this.renderedStyles[h].previous,this.renderedStyles[h].current,this.renderedStyles[h].ease);this.layout();var b=!0,c=!1,d=void 0;try{for(var e,f,g=this.items[Symbol.iterator]();!(b=(e=g.next()).done);b=!0)f=e.value,f.isVisible&&f.render()}catch(a){c=!0,d=a}finally{try{b||null==g.return||g.return()}finally{if(c)throw d}}requestAnimationFrame(function(){return _newArrowCheck(this,a),this.render()}.bind(this))},a}(),preloadImages=function(){var a=this;return _newArrowCheck(this,_this),new Promise(function(b){_newArrowCheck(this,a),imagesLoaded(document.querySelectorAll(".item__img"),{background:!0},b)}.bind(this))}.bind(void 0);preloadImages().then(function(){_newArrowCheck(this,_this),document.body.classList.remove("loading"),getPageYScroll(),new SmoothScroll}.bind(void 0))}
//# sourceMappingURL=smoothScroll.js.map